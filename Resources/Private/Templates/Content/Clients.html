<div xmlns="http://www.w3.org/1999/xhtml" lang="en"
      xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
      xmlns:flux="http://typo3.org/ns/FluidTYPO3/Flux/ViewHelpers">

<f:layout name="Content"/>

<f:section name="Configuration">
    <flux:form id="clients" label="Client Logos" options="{group:'MobApp',Fluidcontent: {sorting:50},icon:'EXT:t3content_mobapp/ext_icon.png'}" localLanguageFileRelativePath="/Resources/Private/Language/locallang_clients.xlf">

        <flux:form.sheet name="clientSheet" label="Clients" variables="{_all}">
            <flux:form.section name="settings.clients" label="Clients">
                <flux:form.object name="client" label="Client">
                    <flux:field.file
                        name="logo"
                        allowed="jpg,png,svg"
                        showThumbnails="1"
                        label="Client Logo"
                        required="1" />
                </flux:form.object>
            </flux:form.section>
        </flux:form.sheet>
        <flux:form.sheet name="optionsSheet" label="Options" variables="{_all}">
            <flux:field.input name="settings.height" label="Logo Height (px)" default="55" required="1" />
        </flux:form.sheet>

    </flux:form>
</f:section>

<f:section name="Preview">
    Client Logos
    <hr/>
    <f:if condition="{settings.clients}">
        <div class="client-logos my-5">
          <div class="container text-center">
                <f:for each="{settings.clients}" as="obj" key="id">
                    <f:if condition="{obj.client}">
                        <img src="../{f:uri.image(src:obj.client.logo,treatIdAsReference:1,maxHeight:settings.height)}" alt="client logos" class="img-fluid">
                    </f:if>
                </f:for>
          </div>
        </div>
    </f:if>
</f:section>

<f:section name="Main">
    <f:if condition="{settings.clients}">
        <div class="client-logos my-5">
          <div class="container text-center">
                <f:for each="{settings.clients}" as="obj" key="id">
                    <f:if condition="{obj.client}">
                        <img src="/{f:uri.image(src:obj.client.logo,treatIdAsReference:1,maxHeight:settings.height)}" alt="client logos" class="img-fluid">
                    </f:if>
                </f:for>
          </div>
        </div>
    </f:if>
</f:section>

</div>